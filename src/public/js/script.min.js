let openAsideBtn=document.querySelector(".aside-open-btn"),aside=document.querySelector(".aside");openAsideBtn&&aside&&openAsideBtn.addEventListener("click",e=>{aside.style.left="0"});let closeAsideBtn=document.querySelector(".aside-close-btn");closeAsideBtn&&closeAsideBtn.addEventListener("click",e=>{aside.style.left=aside.style.width});let dropdownMenus=document.querySelectorAll(".dropdown-container"),isDropdownOpen=[];dropdownMenus&&dropdownMenus.forEach((e,t)=>{isDropdownOpen[t]=!1,e.addEventListener("click",()=>{let o=e.querySelector(".dropdown-list"),r=e.querySelector(".aside-item__icon > .material-icons-outlined");isDropdownOpen[t]?(o.style.height="0",r.style.transform="rotate(0)",isDropdownOpen[t]=!1):(o.style.height="20rem",r.style.transform="rotate(45deg)",isDropdownOpen[t]=!0)})});let loadMoreBtn=document.getElementById("load-more-btn"),loadingText=document.getElementById("loading-text");loadMoreBtn&&loadingText&&loadMoreBtn.addEventListener("click",async e=>{try{loadingText.style.display="block",loadMoreBtn.style.display="none";(await fetch("/recipes/more-recipes",{method:"get",headers:{"Content-Type":"application/json"}})).ok&&location.reload()}catch(t){console.error(t)}}),"/recipes"===window.location.pathname&&loadMoreBtn&&loadingText&&(loadingText.style.display="none",loadMoreBtn.style.display="block");let recipeImages=document.querySelectorAll(".recipe__img"),recipeParams=document.querySelectorAll(".recipe__link"),recipeTitles=document.querySelectorAll(".recipe__title"),recipeSubtitles=document.querySelectorAll(".recipe__subtitle"),bookmarks=document.querySelectorAll(".recipe__bookmark span"),bookmarkInputs=document.querySelectorAll(".recipe__bookmark input");bookmarks&&bookmarks.forEach((e,t)=>{e.addEventListener("click",o=>{bookmarkInputs[t].checked?(e.innerHTML="bookmark_border",removeBookmark(t)):(e.innerHTML="bookmark",addBookmark(t))})});const addBookmark=async e=>{try{let t={id:recipeParams[e].getAttribute("href").substring(16),title:recipeTitles[e].innerHTML,subtitle:recipeSubtitles[e].innerHTML},o=await fetch("/user/add-bookmark",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});o.ok||location.assign(o.url)}catch(r){console.error(r)}},removeBookmark=async e=>{try{let t={id:recipeParams[e].getAttribute("href").substring(16)};return(await fetch("/user/remove-bookmark",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(o){console.error(o)}};let avatarInput=document.getElementById("avatar__input");avatarInput&&avatarInput.addEventListener("change",async e=>{try{let t=new FormData;t.append("file",e.target.files[0]),await fetch("/user/profile-picture",{method:"PUT",body:t}),location.reload()}catch(o){alert("Failed to upload picture."),console.error(o)}});let popupForms=document.querySelectorAll(".popup-form"),openPopupBtns=document.querySelectorAll(".open-popup-btn"),closePopupBtns=document.querySelectorAll(".close-popup-btn"),overlay=document.getElementById("overlay");popupForms&&(openPopupBtns&&openPopupBtns.forEach((e,t)=>{e.addEventListener("click",e=>{popupForms[t].classList.remove("hidden"),overlay.classList.remove("hidden")})}),closePopupBtns&&closePopupBtns.forEach((e,t)=>{e.addEventListener("click",e=>{popupForms[t].classList.add("hidden"),overlay.classList.add("hidden")})}));let deleteAcctForm=document.getElementById("delete-account-form"),deleteAcctText=document.getElementById("delete-acct-text");deleteAcctForm&&deleteAcctForm.addEventListener("submit",e=>{"delete"!==deleteAcctText.value&&e.preventDefault()});